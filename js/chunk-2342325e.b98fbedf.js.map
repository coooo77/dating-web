{"version":3,"sources":["webpack:///./src/views/Search.vue?548a","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/components/Searchbar.vue?a6f6","webpack:///src/components/Searchbar.vue","webpack:///./src/components/Searchbar.vue?10ba","webpack:///./src/components/Searchbar.vue?750c","webpack:///src/views/Search.vue","webpack:///./src/views/Search.vue?536d","webpack:///./src/views/Search.vue","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./src/components/Searchbar.vue?eeea"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","handleAfterSubmit","state","attrs","wrongInformation","_e","_l","user","key","id","afterChangeLiked","afterClickUser","isAllLoaded","isInitial","wrong","allLoad","showXBtn","intersected","staticRenderFns","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","unsupportedIterableToArray","length","i","F","s","n","done","value","e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","$event","preventDefault","handleSearch","_v","directives","name","rawName","expression","$$selectedVal","prototype","filter","call","target","options","selected","map","val","_value","gender","multiple","domProps","_s","composing","minAge","maxAge","location","_m","data","genderOption","methods","$emit","formData","component","created","isWrong","initialSearch","fetchAllUsers","searchResult","initialUsers","users","offset","isLoading","strong","text","wrongSearch","noResult","components","Searchbar","Alert","Spinner","Observer","UserCard","query","filteredUsers","splice","filterUsers","trim","queryLocation","test","city","fetchMoreUser","newUsers","mixins","$","$trim","forcedStringTrimMethod","proto","forced","DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","RegExp","RegExpPrototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","indexOf","replace","result","proxy","configurable","get","keys","index","module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","rtrim","createMethod","TYPE","$this","string","String","start","end","isObject","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","non","METHOD_NAME"],"mappings":"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","file":"js/chunk-2342325e.b98fbedf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('Searchbar',{on:{\"after-submit\":_vm.handleAfterSubmit}}),(_vm.state.isWrong)?_c('Alert',{attrs:{\"wrong\":_vm.wrongInformation}}):_vm._e(),_c('div',{staticClass:\"container mt-5\"},[_c('div',{staticClass:\"users row\"},_vm._l((_vm.users),function(user){return _c('UserCard',{key:user.id,attrs:{\"user\":user},on:{\"afterChangeLiked\":_vm.afterChangeLiked,\"afterClickUser\":_vm.afterClickUser}})}),1),(_vm.state.isAllLoaded && !_vm.state.isInitial)?_c('Alert',{attrs:{\"wrong\":_vm.wrong.allLoad,\"showXBtn\":_vm.wrong.allLoad.showXBtn}}):_vm._e()],1),(_vm.state.isLoading)?_c('Spinner'):_vm._e(),_c('Observer',{attrs:{\"isAllLoaded\":_vm.state.isAllLoaded},on:{\"intersect\":_vm.intersected}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-bar bg-secondary d-flex justify-content-center shadow\"},[_c('form',{staticClass:\"form-inline\",attrs:{\"id\":\"search-form\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSearch($event)}}},[_c('div',{staticClass:\"d-inline\"},[_c('span',[_vm._v(\"找\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.gender),expression:\"gender\"}],attrs:{\"name\":\"gender\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.gender=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\",\"selected\":\"\",\"disabled\":\"\"}},[_vm._v(\"--性別--\")]),_vm._l((_vm.genderOption),function(gender){return _c('option',{key:gender.id,domProps:{\"value\":gender.value}},[_vm._v(_vm._s(gender.name))])})],2),_c('span',[_vm._v(\"年齡從\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.minAge),expression:\"minAge\"}],staticClass:\"d-inline\",attrs:{\"type\":\"number\",\"max\":\"100\",\"min\":\"18\",\"name\":\"min-age\",\"placeholder\":\"歲\"},domProps:{\"value\":(_vm.minAge)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.minAge=$event.target.value}}}),_c('span',[_vm._v(\"到\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.maxAge),expression:\"maxAge\"}],staticClass:\"d-inline\",attrs:{\"type\":\"number\",\"max\":\"80\",\"min\":\"18\",\"name\":\"max-age\",\"placeholder\":\"歲\"},domProps:{\"value\":(_vm.maxAge)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.maxAge=$event.target.value}}})]),_c('div',{staticClass:\"d-inline\"},[_c('span',[_vm._v(\"地區\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.location),expression:\"location\"}],attrs:{\"type\":\"text\",\"name\":\"location\",\"placeholder\":\"居住區域\"},domProps:{\"value\":(_vm.location)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.location=$event.target.value}}}),_vm._m(0)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"search-icon ml-2\"},[_c('button',{staticClass:\"search-icon-btn\",attrs:{\"type\":\"submit\"}},[_c('i',{staticClass:\"fas fa-search\"})])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-bar bg-secondary d-flex justify-content-center shadow\">\r\n    <form id=\"search-form\" class=\"form-inline\" @submit.prevent=\"handleSearch\">\r\n      <div class=\"d-inline\">\r\n        <span>找</span>\r\n        <select name=\"gender\" v-model=\"gender\">\r\n          <option value selected disabled>--性別--</option>\r\n          <option\r\n            v-for=\"gender in genderOption\"\r\n            :value=\"gender.value\"\r\n            :key=\"gender.id\"\r\n          >{{gender.name}}</option>\r\n        </select>\r\n        <span>年齡從</span>\r\n        <input\r\n          type=\"number\"\r\n          max=\"100\"\r\n          min=\"18\"\r\n          name=\"min-age\"\r\n          placeholder=\"歲\"\r\n          class=\"d-inline\"\r\n          v-model=\"minAge\"\r\n        />\r\n        <span>到</span>\r\n        <input\r\n          type=\"number\"\r\n          max=\"80\"\r\n          min=\"18\"\r\n          name=\"max-age\"\r\n          placeholder=\"歲\"\r\n          class=\"d-inline\"\r\n          v-model=\"maxAge\"\r\n        />\r\n      </div>\r\n      <div class=\"d-inline\">\r\n        <span>地區</span>\r\n        <input type=\"text\" name=\"location\" placeholder=\"居住區域\" v-model=\"location\" />\r\n        <span class=\"search-icon ml-2\">\r\n          <button type=\"submit\" class=\"search-icon-btn\">\r\n            <i class=\"fas fa-search\"></i>\r\n          </button>\r\n        </span>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      genderOption: [\r\n        {\r\n          id: 1,\r\n          name: \"男性\",\r\n          value: \"male\",\r\n        },\r\n        {\r\n          id: 2,\r\n          name: \"女性\",\r\n          value: \"female\",\r\n        },\r\n        {\r\n          id: 3,\r\n          name: \"無限制\",\r\n          value: \"\",\r\n        },\r\n      ],\r\n      gender: \"\",\r\n      minAge: 18,\r\n      maxAge: 80,\r\n      location: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    handleSearch(e) {\r\n      // 資料傳給父層search搜尋、顯示結果。\r\n      const form = e.target;\r\n      const formData = new FormData(form);\r\n      this.$emit(\"after-submit\", formData);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search-bar {\r\n  min-height: 4rem;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n  #search-form div {\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Searchbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Searchbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Searchbar.vue?vue&type=template&id=4a475d5a&scoped=true&\"\nimport script from \"./Searchbar.vue?vue&type=script&lang=js&\"\nexport * from \"./Searchbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Searchbar.vue?vue&type=style&index=0&id=4a475d5a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a475d5a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"search\">\r\n    <Searchbar @after-submit=\"handleAfterSubmit\" />\r\n    <Alert v-if=\"state.isWrong\" :wrong=\"wrongInformation\" />\r\n    <div class=\"container mt-5\">\r\n      <div class=\"users row\">\r\n        <UserCard\r\n          v-for=\"user in users\"\r\n          :key=\"user.id\"\r\n          :user=\"user\"\r\n          @afterChangeLiked=\"afterChangeLiked\"\r\n          @afterClickUser=\"afterClickUser\"\r\n        />\r\n      </div>\r\n      <Alert\r\n        v-if=\"state.isAllLoaded && !state.isInitial\"\r\n        :wrong=\"wrong.allLoad\"\r\n        :showXBtn=\"wrong.allLoad.showXBtn\"\r\n      />\r\n    </div>\r\n\r\n    <Spinner v-if=\"state.isLoading\" />\r\n    <Observer @intersect=\"intersected\" :isAllLoaded=\"state.isAllLoaded\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Alert from \"../components/Alert\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport Observer from \"../components/Observer\";\r\nimport Searchbar from \"../components/Searchbar\";\r\nimport UserCard from \"../components/UserCard.vue\";\r\nimport usersAPI from \"../apis/users\";\r\nimport { toggleLike, passUserToModal } from \"../utils/mixins\";\r\nimport { Toast } from \"../utils/helper\";\r\n\r\nexport default {\r\n  created() {\r\n    this.state.isWrong = true;\r\n    this.wrongInformation = this.wrong.initialSearch;\r\n    this.fetchAllUsers();\r\n  },\r\n  data() {\r\n    return {\r\n      searchResult: [],\r\n      initialUsers: [],\r\n      users: [],\r\n      offset: 12,\r\n      state: {\r\n        isWrong: false,\r\n        isLoading: false,\r\n        isAllLoaded: false,\r\n        isInitial: true,\r\n      },\r\n      wrong: {\r\n        initialSearch: {\r\n          strong: \"請輸入設定！\",\r\n          text: \"尋找理想的好友！\",\r\n        },\r\n        wrongSearch: {\r\n          strong: \"發生錯誤\",\r\n          text: \"請重新搜尋！\",\r\n        },\r\n        noResult: {\r\n          strong: \"沒有任何符合的資料\",\r\n          text: \"請重新搜尋！\",\r\n        },\r\n        allLoad: {\r\n          strong: \"已經到頁底!\",\r\n          text: \"所有使用者已經顯示完畢。\",\r\n          showXBtn: false,\r\n        },\r\n      },\r\n      wrongInformation: {},\r\n    };\r\n  },\r\n  components: {\r\n    Searchbar,\r\n    Alert,\r\n    Spinner,\r\n    Observer,\r\n    UserCard,\r\n  },\r\n  methods: {\r\n    handleAfterSubmit(formData) {\r\n      this.state.isWrong = false;\r\n      this.state.isInitial = false;\r\n      this.state.isAllLoaded = false;\r\n\r\n      let query = {};\r\n      for (let [name, value] of formData.entries()) {\r\n        query[name] = value;\r\n      }\r\n\r\n      // 避免有使用者輸入錯誤的年齡範圍\r\n      if (query[\"min-age\"] > query[\"max-age\"]) {\r\n        this.state.isWrong = true;\r\n        this.state.isInitial = true;\r\n        this.wrongInformation = this.wrong.wrongSearch;\r\n        this.users = [];\r\n        return;\r\n      }\r\n\r\n      const filteredUsers = this.filterUsers(\r\n        this.initialUsers,\r\n        query[\"min-age\"],\r\n        query[\"max-age\"],\r\n        query.gender,\r\n        query.location\r\n      );\r\n\r\n      if (filteredUsers.length === 0) {\r\n        this.state.isWrong = true;\r\n        this.wrongInformation = this.wrong.noResult;\r\n      } else {\r\n        this.searchResult = [...filteredUsers];\r\n        this.users = this.searchResult.splice(0, this.offset);\r\n        if (this.searchResult.length === 0) this.state.isAllLoaded = true;\r\n      }\r\n    },\r\n    async fetchAllUsers() {\r\n      try {\r\n        const like = JSON.parse(sessionStorage.getItem(\"like\"));\r\n        // 因為CORS，所以要執行到有資料為止\r\n        while (this.initialUsers.length === 0) {\r\n          const { data, status, statusText } = await usersAPI.get120Users();\r\n\r\n          if (status !== 200) {\r\n            throw new Error(statusText);\r\n          }\r\n\r\n          this.initialUsers = data.results.map((user, index) => ({\r\n            ...user,\r\n            id: index + 1,\r\n            name: Object.values(user.name).splice(1, 2).join(\" \"),\r\n            isLiked: like.includes(index + 1),\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"伺服器忙碌中，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    filterUsers(users, min, max, gender, location) {\r\n      let data = users.filter(\r\n        (user) => user.dob.age <= max && user.dob.age >= min\r\n      );\r\n\r\n      if (gender) {\r\n        data = data.filter((user) => user.gender === gender);\r\n      }\r\n\r\n      if (location.trim()) {\r\n        data = data.filter((user) => {\r\n          const queryLocation = new RegExp(location.trim(), \"i\");\r\n          return queryLocation.test(user.location.city);\r\n        });\r\n      }\r\n\r\n      return data;\r\n    },\r\n    fetchMoreUser() {\r\n      this.state.isLoading = true;\r\n      const newUsers = this.searchResult.splice(0, this.offset);\r\n      if (newUsers.length === 0) {\r\n        this.state.isAllLoaded = true;\r\n      } else {\r\n        this.users.push(...newUsers);\r\n      }\r\n      this.state.isLoading = false;\r\n    },\r\n    intersected() {\r\n      // 因為會有重複搜尋的情況，所以不解除observer\r\n      this.fetchMoreUser();\r\n    },\r\n  },\r\n  mixins: [toggleLike, passUserToModal],\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=3f912526&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.github.io/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.github.io/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Searchbar.vue?vue&type=style&index=0&id=4a475d5a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Searchbar.vue?vue&type=style&index=0&id=4a475d5a&scoped=true&lang=css&\""],"sourceRoot":""}